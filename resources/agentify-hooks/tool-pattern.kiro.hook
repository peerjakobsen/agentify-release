{
  "enabled": true,
  "name": "Tool Pattern Enforcer",
  "description": "Enforces correct decorator order for Agentify tools: @tool above @instrument_tool",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": ["agents/*/tools/*.py"]
  },
  "then": {
    "type": "askAgent",
    "prompt": "Check this file for decorator order violations on tool functions.\n\nCORRECT decorator stacking (exactly as shown):\n```python\n@tool\n@instrument_tool\ndef my_tool():\n    ...\n```\n\nThe @tool decorator MUST appear on the line ABOVE @instrument_tool.\nThe @instrument_tool decorator MUST appear on the line directly ABOVE the function def.\n\nPython applies decorators bottom-up, so @instrument_tool wraps the function first, then @tool registers it with Strands.\n\nWRONG order to detect:\n```python\n@instrument_tool\n@tool\ndef my_tool():\n    ...\n```\n\nIf you see @instrument_tool appearing above @tool, swap them so @tool is on top.\n\nAlso verify:\n1. @instrument_tool is imported from agents.shared.instrumentation\n2. @tool is imported from strands\n3. No local definitions of instrument_tool exist in this file"
  },
  "shortName": "tool-pattern"
}
